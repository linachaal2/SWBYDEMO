name: run-validation
'on': workflow_dispatch
jobs:
 validate-rollout-files:
    name: Run Powershell script
    runs-on: ubuntu-latest #self-hosted
    environment: RFH
    steps:
      - uses: actions/checkout@v4
      
      - name: Get Env Var
        run: |
         echo ${{ vars.CUSTOMER_NAME }} 
      
      - name: Run Powershell Validation
        id: ps-validation
        shell: pwsh
        run: |
          ./scripts/code_review_base_prototype.ps1 ${{ github.workspace }}/rollout > validation.log
     
      - name: Upload validation file
        uses: actions/upload-artifact@v4
        with:
          name: validation-log-file
          path: validation.log 
      
      - name: Get Final Validation result
        run: |
          value=`cat validation.log`
          echo The result is $value    
     # - name: Get Powershell Validation Results
     #   run:  echo "Pwsh output: ${{ steps.ps-validation.outputs.outputContent }}" 
