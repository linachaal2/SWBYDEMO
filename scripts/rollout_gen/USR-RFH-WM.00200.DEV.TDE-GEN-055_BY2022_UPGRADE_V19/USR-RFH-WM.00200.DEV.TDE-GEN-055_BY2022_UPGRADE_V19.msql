/* Rollout name
   Rollout types:
   -COD = code only
   -SET = setup, config only
   -SFX = setup fix, fix on config only
   -(TMP, BCK, RBK are excluded in auto rollout logic for Starware)
 */
publish data
 where rollout_name = "USR-RFH-WM.00200.DEV.TDE-GEN-055_BY2022_UPGRADE_V19"
/* Add Readme notes, start with the rollout version, this will be included in the generated readme file */
   and rollout_readme_release_notes = "
-V01: rollout for solving 2022 issues
-V02: remove USR-RFH003 label and update other label settings to 2022 standards
-V02: set right label data 
-V02: set lbl_cmd for production label
-V03: fix issues merging 2020
-V04: fix issues merging 2020
-V05: adjust wrappers get component details for work order, process inventory move
-V05: adjust locmst
-V05: remove temporary fix work order notes (fixed in version 2022)
-V06: Correction on skip height cubing (rules without asset)
-V07: Mobile corrections (les mls cat) on text to long
-V08: changed EMS policy which is not used anymore
-V09: changed production related standard commands to show the correct produced quantity in the web ui
-V10: missing policies Eelde (homework-area connected to itself)
-V11: Check for locale in RFL dashboard
-V12: Report corrections due to unavailable fonts on linux environments (Blue Yonder issue)
-V12: Report correction due to barcode used on linux environemtns (Blue Yonder issue)
-V12: Removed un-used report versions to avoid stay current costs
-V12: Adjustments on endpoints production (request Conclusion)
-V13: Corrected policy for label USR-RFH003
-V14: Corrected policy to disable label printing as delivery note on eelde
-V15: Correction Aalsmeer connected work area
-V16: Correction Naaldwijk/Rijndburg label printing
-V16: Fix on retrieve command on the dashboard
-V17: Change on dispatch trailer, as shipment quantities are doubled due to deferred execution (Blue Yonder bug)
-v18: Resourcecodes and qvl fixes, fix in remove hold process
-v19: DUMMYITEM flag to enable remove inventroy
"
|
/* Requirements */
/*  specify 1 or more rollouts below, this will generate a check during rollout, if the specified rollouts are not found the rollout process will stop */
/*{
   publish data
   where required_rollout_id = '00'
   and rollout_type = 'COD'
   and minimal_version = 'v01'
   and excluded_server_types = ['AA', 'PA']
   } >> required_rollouts
   |*/
{
    [select '----' as wh_name,
            '----' as wh_id,
            '----' as query_wh_id,
            '' as remote_prefix,
            '[USE AMRWMSMD22];' as db_prefix
       from dual] &
    [select 'AMR' as wh_name,
            '1' as wh_id,
            '1' as query_wh_id,
            'remote("http://rfh-wms-server:4600/service")' as remote_prefix,
            '[USE AMRWMSMD22];' as db_prefix
       from dual] &
    [select 'NLW' as wh_name,
            '2' as wh_id,
            '2' as query_wh_id,
            'remote("http://rfh-wms-server:4600/service")' as remote_prefix,
            '[USE NLWWMSMD22];' as db_prefix
       from dual] &
    [select 'RBG' as wh_name,
            '3' as wh_id,
            '3' as query_wh_id,
            'remote("http://rfh-wms-server:4600/service")' as remote_prefix,
            '[USE RBGWMSMD22];' as db_prefix
       from dual] &
    [select 'EEL' as wh_name,
            '7' as wh_id,
            '7' as query_wh_id,
            'remote("http://rfh-wms-server:4600/service")' as remote_prefix,
            '[USE EELWMSMD22];' as db_prefix
       from dual]
} >> res_wh
|
{
    /* Rollout Information */
    publish data
     where type = "comment"
       and comment = "##### Rollout generated by 'create usr rollout package' for rollout " || @rollout_name || " at " || sysdate || " #####" &
    /* Generic rollout files. (copy the files to the indicated server directory before generating the rollout) */
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/scripts/rollout_gen/generic/"
       and server_file = "rollout.v02.pl"
       and package_dir = ""
       and package_file = "rollout.pl"
       and include_in_rollout_script = 0 &
    if (@required_rollouts)
    {
        publish data
         where type = 'rollout-script-text'
           and text = "RUNMSQL $SOURCEDIR/pkg/scripts/00_Rollout_requirements.msql"
    } &
    /* remove files */
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/src/cmdsrc/usrint/produce_usr_usr_rfh003_lbl.mcmd" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/labels/usrint/USR_RFH003.msql" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/labels/usrint/z140xiII/USR_RFH003.POF" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/src/cmdsrc/usrint/create_work_order_note.mcmd" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0103-GLN_overview.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0102-GLN_overview.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101-GLN_overview.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100-GLN_overview.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0102-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0101-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0100-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0100_sub_report-notes-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0100_sub_report-lot-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0101_sub_report-lot-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0100_sub_report-notes-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh009-v0100_sub_rep-link-wo-production_wo.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-unused_tracks.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-unused_tracks.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-movement_paths.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-movement_paths.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-missing-config.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-missing-config.jrxml" & 
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-GLN_setup.jrxml" & 
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-GLN_setup.jrxml" & 
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-GLN_delivery.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-GLN_delivery.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-GLN-GLN_setup.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-GLN-GLN_setup.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0101_sub_report-Delivery-GLN_delivery.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh008-v0100_sub_report-Delivery-GLN_delivery.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh006-v0102-customer_report.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh006-v0101-customer_report.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh006-v0100-customer_report.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0105-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0104-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0103-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0102-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0101-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh005-v0100-troubleshoot_report_1.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh004-v0100-inventory.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0100-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0101-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0102-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0103-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0104-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0105-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0106-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0107-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0108-ffdeliverynote.jrxml" &
    publish data
     where type = "rollout-script-text"
       and text = "REMOVE $LESDIR/reports/usrint/usr-rfh001-v0109-ffdeliverynote.jrxml" &     
    /* MSQL scripts (copy the files to the indicated server directory before generating the rollout) */
    publish data
     where type = "comment"
       and comment = "MSQL" &
     publish data
     where type = "msql"
       and server_dir = "$LESDIR/scripts/rollout_gen/" || @rollout_name || "/scripts/"
       and server_file = "20_delete_data.msql" & 
    publish data
     where type = "msql"
       and server_dir = "$LESDIR/scripts/rollout_gen/" || @rollout_name || "/scripts/"
       and server_file = "30_update_data.msql" &
    /* JAVA MTFCLIENT SOURCE FILES */
    publish data
     where type = "comment"
       and comment = "JAVA-MTFCLIENT-SOURCE-FILES" &
    /* JAVA MTFCLIENT LIB FILES */
    /* We don't build on the server (yet) becasue ant is not installed. So we need to copy the jar files too. */
    publish data
     where type = "comment"
       and comment = "JAVA-MTFCLIENT-LIB-FILES" &
    /* JAVA LIB FILES */
    /* 3th party libs */
    publish data
     where type = "comment"
       and comment = "JAVA-LIB-FILES" &
 publish data
     where type = "file-include"
       and server_dir = "$LESDIR/javalib/"
       and server_file = "barcode4j-2.1.jar"
       and package_dir = "pkg/javalib/"
       and package_file = "barcode4j-2.1.jar"
       and include_in_rollout_script = 1 &       
    /************************************************************
     * CORE ROLLOUT (NOT WH SPECIFIC)
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***CORE ROLLOUT (NOT WH SPECIFIC)***" &
    /* INTERFACES */
    publish data
     where type = "comment"
       and comment = "INTERFACES" &
    /* REPORTS */
    publish data
     where type = "comment"
       and comment = "REPORTS" &
 publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104-GLN_overview.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104-GLN_overview.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-unused_tracks.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-unused_tracks.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-movement_paths.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-movement_paths.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-missing-config.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-missing-config.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-GLN_setup.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-GLN_setup.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-GLN-GLN_setup.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-GLN-GLN_setup.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-GLN_delivery.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-GLN_delivery.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh008-v0104_sub_report-Delivery-GLN_delivery.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh008-v0104_sub_report-Delivery-GLN_delivery.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh009-v0103-production_wo.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh009-v0103-production_wo.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh009-v0103_sub_rep-link-wo-production_wo.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh009-v0103_sub_rep-link-wo-production_wo.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh009-v0103_sub_report-lot-production_wo.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh009-v0103_sub_report-lot-production_wo.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh009-v0103_sub_report-notes-production_wo.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh009-v0103_sub_report-notes-production_wo.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh006-v0103-customer_report.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh006-v0103-customer_report.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh004-v0101-inventory.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh004-v0101-inventory.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh001-v0110-ffdeliverynote.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh001-v0110-ffdeliverynote.jrxml"
       and include_in_rollout_script = 1 &
    publish data
     where type = "file-include"
       and server_dir = "$LESDIR/reports/usrint/"
       and server_file = "usr-rfh005-v0106-troubleshoot_report_1.jrxml"
       and package_dir = "pkg/reports/usrint/"
       and package_file = "usr-rfh005-v0106-troubleshoot_report_1.jrxml"
       and include_in_rollout_script = 1 &
    /* LABELS */
    publish data
     where type = "comment"
       and comment = "LABELS" &
    /* COMMANDS */
    publish data
     where type = "comment"
       and comment = "COMMANDS" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "change rf device" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "get component details for work order" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "get pick release locations for movement zone" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "dispatch trailer" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "process inventory move" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "list base columns of workqueue" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "scan usr rf multiple lpns from loc" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "get web work order detail counts" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "list inventory view inventory details info" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "list inventory view loadnumbers info" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "list usr ready for list locations" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "list usr details for ready for list locations" &
    publish data
     where type = "mcmd"
       and level = "usrint"
       and command = "update usr hold code to invdtl" &
    /* TRIGGERS */
    publish data
     where type = "comment"
       and comment = "TRIGGERS" &
    publish data
     where type = "mtrg"
       and level = "usrint"
       and command = "process pick list"
       and trigger = "set usr one pass flag if applicable" &
    /************************************************************
     * MLOAD - CORE ROLLOUT (NOT WH SPECIFIC)
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***MLOAD - CORE ROLLOUT (NOT WH SPECIFIC)***" &
    publish data
     where type = "mload"
       and mload_wh_id = '----'
       and table = "rpt_config"
       and name = "rpt_config"
       and query = "[select * from rpt_config where rpt_id in ('USR-RFH009 Workorder','USR-RFH008 GLN Overview','USR-RFH006 customer report','USR-RFH005 Troubleshoot report','USR-RFH004 Inventory report','USR-RFH001-FFDELIVERYNOTE')]" &
    publish data
     where type = "mload"
       and mload_wh_id = '----'
       and table = "lblfmt"
       and name = "lblfmt"
       and query = "[select * from lblfmt where lblfmt in ('USR-RFH007', 'USR-RFH002', 'USR-RFH010')]" &
    publish data
     where type = "mload"
       and mload_wh_id = '----'
       and table = "les_mls_cat"
       and name = "les_mls_cat"
       and query = "[select * from les_mls_cat where cust_lvl=10]" &
    publish data
     where type = "mload"
       and mload_wh_id = '----'
       and table = "job_definition"
       and name = "job_definition"
       and query = "[select * from job_definition where job_id = 'USR-DEFERRED-EXECUTION-3']" &
    /************************************************************
     * WAREHOUSE 1 (AMR) SPECIFIC ROLLOUT
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***WAREHOUSE 1 (AMR) SPECIFIC ROLLOUT***" &
    publish data
     where type = "mload"
       and mload_wh_id = '1'
       and table = "poldat"
       and name = "poldat"
       and query = "[select * from poldat where polcod like 'USR-LABELS'] &
                    [select * from poldat where polcod = 'USR-RF-FORM' and polvar = 'CONNECTED-WA']" &
    /************************************************************
     * WAREHOUSE 2 (NLW) SPECIFIC ROLLOUT
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***WAREHOUSE 2 (NLW) SPECIFIC ROLLOUT***" &
    publish data
     where type = "mload"
       and mload_wh_id = '2'
       and table = "poldat"
       and name = "poldat"
       and query = "[select * from poldat where polcod like 'USR-LABELS'] &
                    [select * from poldat where polcod = 'USR-RF-FORM' and polvar = 'CONNECTED-WA']" &
    /************************************************************ 
     * WAREHOUSE 3 (RBG) SPECIFIC ROLLOUT 
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***WAREHOUSE 3 (RBG) SPECIFIC ROLLOUT***" &
    publish data
     where type = "mload"
       and mload_wh_id = '3'
       and table = "poldat"
       and name = "poldat"
       and query = "[select * from poldat where polcod like 'USR-LABELS'] &
                    [select * from poldat where polcod = 'USR-RF-FORM' and polvar = 'CONNECTED-WA']" &
    /************************************************************ 
     * WAREHOUSE 7 (EEL) SPECIFIC ROLLOUT 
     ************************************************************/
    publish data
     where type = "comment"
       and comment = "***WAREHOUSE 7 (EEL) SPECIFIC ROLLOUT***" &
    publish data
     where type = "mload"
       and mload_wh_id = '7'
       and table = "poldat"
       and name = "poldat"
       and query = "[select * from poldat where polcod like 'USR-LABELS'] &
                    [select * from poldat where polcod = 'USR-RF-FORM' and polvar = 'CONNECTED-WA']" &
    /* MSQL scripts (copy the files to the indicated server directory before generating the rollout) */
    publish data
     where type = "comment"
       and comment = "MSQL" &
    publish data
     where type = "msql"
       and server_dir = "$LESDIR/scripts/rollout_gen/" || @rollout_name || "/scripts/"
       and server_file = "80_integrator_sys_comm.msql" &
   /* REBUILDS */
    publish data
     where type = "comment"
       and comment = "REBUILDS" &
    publish data
     where type = "rollout-script-text"
       and text = "MBUILD" &
    /* MSQL scripts (copy the files to the indicated server directory before generating the rollout) */
    /* DO NOT EDIT BELOW THIS */
    publish data
     where type = "comment"
       and comment = "MSQL" &
    publish data
     where type = 'rollout-script-text'
       and text = "RUNMSQL $SOURCEDIR/pkg/scripts/90_Rollout_install_insert.msql"
} >> res_rollout
|
{
    {
        publish data combination
         where res = @res_rollout
        |
        filter data
         where moca_filter_level = 1
           and query_wh_id = nvl(@query_wh_id, @mload_wh_id)
    } >> res_rollout
    |
    merge result sets with data
     where resultset = @res_rollout
       and additionalresultset = @res_wh
       and keycolumns = 'query_wh_id'
    |
    filter data
     where moca_filter_level = 1
       and query = @db_prefix || @query
} >> res_rollout
|
/* DO NOT EDIT ABOVE THIS */
create usr rollout package
 where rollout_name = @rollout_name
   and res_rollout = @res_rollout
   and rollout_readme_release_notes = @rollout_readme_release_notes
   and required_rollouts = @required_rollouts
   and ignore_mload_nodata = 0
   and remove_rollout_dir_if_exists = 1
   and generate_rollout_shared = 1
   and zip_rollout = 1
   and list_content_after_create = 1